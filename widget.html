<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Так надо</title>
</head>
<body>
Телеграмм особенный, поэтому делаем для него отдельные костыли. Нажми на виджет, чтобы продолжить.<br>
<script>

function getQueryParam(param) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(param);
}
    
const script = document.createElement("script");

script.async = true;
script.src = "https://telegram.org/js/telegram-widget.js?22";
script.setAttribute("data-telegram-login", getQueryParam("client_id"));
script.setAttribute("data-size", "large");
script.setAttribute("data-auth-url", `oauth/${encodeURIComponent(getQueryParam("redirect_uri"))}/${encodeURIComponent(getQueryParam("state"))}`);

document.body.appendChild(script);
</script>

</body>
</html>
